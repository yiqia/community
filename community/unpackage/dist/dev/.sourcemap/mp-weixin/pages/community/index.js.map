{"version":3,"sources":["uni-app:///main.js","webpack:////Users/code/community/community/pages/community/index.vue?06e4","webpack:////Users/code/community/community/pages/community/index.vue?be7f","webpack:////Users/code/community/community/pages/community/index.vue?2556","webpack:////Users/code/community/community/pages/community/index.vue?962e","uni-app:///pages/community/index.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","communityInfoComment","uLoadmore","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,6C,mDACAA,EAAWC,a;;;;2DCHX,wNACIC,EADJ,kMAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,4BACZ,aAAAF,E;;;;2GCtBf,myC;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,qBAAsB,WACpB,OAAO,iOAITC,UAAW,WACT,OAAO,2LAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCtCvB,03BAAo0B,eAAG,G;;;;2MC8Bv0B,oCACA,oC,k/BAEA,QACA,K,WACA,OACA,QACA,WACA,UACA,iBACA,QAGA,WAGA,O,SAAA,wJACA,mCADA,cACA,EADA,OAGA,6BAHA,SAIA,sCAJA,cAIA,EAJA,gBAKA,gBALA,OAKA,EALA,OAMA,qCACA,YACA,WACA,aACA,mBAEA,2BACA,mBAEA,UAfA,+CAiBA,c,WAAA,sIACA,aADA,oDAEA,YACA,WAHA,iCAIA,gBAJA,OAIA,EAJA,OAKA,qCACA,8BACA,kBAPA,wBASA,kBATA,+CAaA,kB,WAAA,mJACA,sCADA,cACA,EADA,gBAEA,gBAFA,OAEA,EAFA,OAGA,qCACA,YACA,WACA,aACA,mBAEA,aACA,aACA,cAEA,wBAbA,+CAeA,Q,4BAGA,CAEA,WAFA,SAEA,kJACA,qCADA,OACA,EADA,OAEA,IACA,2DACA,yJAJA,8CAQA,QAVA,SAUA,kJACA,kCADA,OACA,EADA,OAEA,IACA,oCACA,oFAJA,8CAQA,YAlBA,SAkBA,sJACA,wFADA,OACA,EADA,OAEA,IACA,aACA,eAEA,qBACA,UAEA,+BACA,GACA,aACA,gBACA,kBACA,4BACA,OACA,SACA,oBACA,YACA,cACA,aACA,qBAEA,KACA,6CAEA,qBACA,oBA3BA,8CAkCA,iBApDA,SAoDA,uIACA,6BADA,OACA,EADA,OAEA,YACA,aACA,eAGA,aACA,YACA,cATA,8CAeA,YAnEA,SAmEA,mIACA,eACA,cAFA,SAIA,6BAJA,cAKA,gBACA,EACA,4BAPA,8CAUA,UA7EA,SA6EA,yIACA,wBACA,0CAFA,SAGA,2BAHA,OAGA,EAHA,OAIA,EAEA,gBACA,mBACA,sBAKA,6BACA,2CAdA,8CAkBA,gBA/FA,SA+FA,yIACA,oCACA,4DAFA,SAGA,iCAHA,OAGA,EAHA,OAIA,EAEA,gBACA,mBACA,qBAKA,4DAbA,gD,iBAiBA,CACA,gBACA,yB","file":"pages/community/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/community/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=5fb47dc3&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fb47dc3\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/community/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=5fb47dc3&scoped=true&\"","var components\ntry {\n  components = {\n    communityInfoComment: function() {\n      return import(\n        /* webpackChunkName: \"components/communityInfo-comment/communityInfo-comment\" */ \"@/components/communityInfo-comment/communityInfo-comment.vue\"\n      )\n    },\n    uLoadmore: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-loadmore/u-loadmore\" */ \"@/uview-ui/components/u-loadmore/u-loadmore.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<div name=\"\">\n\t\t<community-card \n\t\t\t:info=\"info\"\n\t\t\t@tapComment=\"tapComment\"\n\t\t\t:isShowAll=\"true\"\n\t\t\t@clickGood=\"clickGood\"\n\t\t\t@clickCollection=\"clickCollection\"\n\t\t\t@clickFollow=\"clickFollow\"\n\t\t\t@changeMoreSelect=\"changeMoreSelect\"\n\t\t></community-card>\n\t\t<communityInfo-comment \n\t\t\t:info=\"comment\"\n\t\t\t@sendComment=\"sendComment\"\n\t\t\t@tapGood=\"tapGood\"\n\t\t\t@tapGoodTwo=\"tapGoodTwo\"\n\t\t></communityInfo-comment>\n\t\t<view style=\"width: 100%;height: 10vh;margin-top: 20rpx;\">\n\t\t\t<u-loadmore :status=\"status\"/>\n\t\t</view>\n\t\t<view style=\"width: 100%;height: 10vh;\">\n\t\t\t\n\t\t</view>\n\t</div>\n</template>\n\n<script>\n\t// 一奇开源 QQ330729121\n\timport communityCard from '../../components/community-card/index.vue';\n\timport communityInfoComment from '../../components/communityInfo-comment/communityInfo-comment.vue';\n\timport {Community} from \"../../model/community\";\n\timport {getTime} from \"../../utils/public.js\";\n\texport default{\n\t\tname:\"\",\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tinfo:\"\",\n\t\t\t\tcomment:\"\",\n\t\t\t\tpaging:\"\",\n\t\t\t\tstatus:\"loading\",\n\t\t\t\tId:\"\",\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\t\n\t\t},\n\t\tasync onLoad(e){\n\t\t\tvar res = await Community.getCommunityInfo(e.Id);\n\t\t\n\t\t\tif(res.code==200) this.info=res.data;\n\t\t\tvar paging = await Community.getCommunityComment(e.Id);\n\t\t\tvar data = await paging.getMoreData();\n\t\t\tconst resData=Community.makeImages(data.items,false);\n\t\t\tthis.comment=resData;\n\t\t\tthis.paging=paging;\n\t\t\tif(!paging.moreData){\n\t\t\t\tthis.status=\"nomore\";\n\t\t\t}\n\t\t\tif(paging.accoumulator.length<20){\n\t\t\t\tthis.status=\"nomore\";\n\t\t\t}\n\t\t\tthis.Id=e.Id;\n\t\t},\n\t\tasync onReachBottom(){\n\t\t\tif(this.paging==\"\")return ;\n\t\t\tvar paging = this.paging;\n\t\t\tif(paging.moreData){\n\t\t\t\tvar data = await paging.getMoreData();\n\t\t\t\tconst resData=Community.makeImages(data.items,false);\n\t\t\t\tthis.comment=this.comment.concat(resData);\n\t\t\t\tthis.status=\"nomore\";\n\t\t\t}else{\n\t\t\t\tthis.status = 'nomore';\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tasync onPullDownRefresh(){\n\t\t\tvar paging = await Community.getCommunityComment(this.Id);\n\t\t\tvar data = await paging.getMoreData();\n\t\t\tconst resData=Community.makeImages(data.items,false);\n\t\t\tthis.comment=resData;\n\t\t\tthis.paging=paging;\n\t\t\tif(!paging.moreData){\n\t\t\t\tthis.status=\"nomore\";\n\t\t\t}\n\t\t\tuni.showToast({\n\t\t\t\ttitle:\"刷新完成\",\n\t\t\t\ticon:'none'\n\t\t\t})\n\t\t\tuni.stopPullDownRefresh();\n\t\t},\n\t\tmounted(){\n\t\t\t\n\t\t},\n\t\tmethods:{\n\t\t\t//二级评论点赞\n\t\t\tasync tapGoodTwo(e){\n\t\t\t\tvar res = await Community.sendCommentTwoGood(e.Id);\n\t\t\t\tif(res){\n\t\t\t\t\tthis.comment[e.index].twoComment[e.indexTwo].isGood=!e.isGood;\n\t\t\t\t\tthis.comment[e.index].twoComment[e.indexTwo].isGood==1?this.comment[e.index].twoComment[e.indexTwo].good+=1:this.comment[e.index].twoComment[e.indexTwo].good-=1;\n\t\t\t\t}\n\t\t\t},\n\t\t\t//评论点赞\n\t\t\tasync tapGood(e){\n\t\t\t\tvar res = await Community.sendCommentGood(e.Id);\n\t\t\t\tif(res){\n\t\t\t\t\tthis.comment[e.index].isGood=!e.isGood;\n\t\t\t\t\tthis.comment[e.index].isGood==1?this.comment[e.index].good+=1:this.comment[e.index].good-=1;\n\t\t\t\t}\n\t\t\t},\n\t\t\t//评论\n\t\t\tasync sendComment(e){\n\t\t\t\tconst res = await Community.senComment({'community_id':this.info.Id,'comment_user_id':e.Id,'content':e.content});\n\t\t\t\tif(res){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"评论成功\"\n\t\t\t\t\t})\n\t\t\t\t\tuni.$emit('commentOk',{\n\t\t\t\t\t\tcode:true\n\t\t\t\t\t});\n\t\t\t\t\tconst userInfo=uni.getStorageSync('userInfo');\n\t\t\t\t\tlet comment={\n\t\t\t\t\t\tId: res.data.Id,\n\t\t\t\t\t\tavatar: userInfo.avatar,\n\t\t\t\t\t\tcontent: e.content,\n\t\t\t\t\t\tcreate_time:getTime(),\n\t\t\t\t\t\tgood: 0,\n\t\t\t\t\t\tisGood: 0,\n\t\t\t\t\t\tnickname: userInfo.nickname,\n\t\t\t\t\t\tsign: userInfo.sign,\n\t\t\t\t\t\ttwoComment: [],\n\t\t\t\t\t\tuser_id: userInfo.Id,\n\t\t\t\t\t\tusername: userInfo.username\n\t\t\t\t\t}\n\t\t\t\t\tif(e.Id){\n\t\t\t\t\t\tthis.comment[e.index]['twoComment'].unshift(comment);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.comment.unshift(comment);\n\t\t\t\t\t\tthis.info.comment+=1;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync changeMoreSelect(e){\n\t\t\t\tvar res = await Community.sendReport(e.Id);\n\t\t\t\tif(res.code==200){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"举报成功\",\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:res.msg,\n\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\t//关注\n\t\t\tasync clickFollow(e){\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:\"请求中\"\n\t\t\t\t})\n\t\t\t\tconst res= await Community.sendFollow(e.Id);\n\t\t\t\tuni.hideLoading();\n\t\t\t\tvar that = this;\n\t\t\t\tthis.info.isFollow=!e.isFollow;\n\t\t\t},\n\t\t\t//点赞\n\t\t\tasync clickGood(e){\n\t\t\t\tthis.info.isGood=!e.isGood;\n\t\t\t\te.isGood==0?this.info.good+=1:this.info.good-=1;\n\t\t\t\tconst res= await Community.sendGood(e.Id);\n\t\t\t\tif(res){\n\t\t\t\t\t//#ifdef MP-WEIXIN\n\t\t\t\t\tuni.vibrateShort({\n\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\tconsole.log('抖动');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t//#endif\n\t\t\t\t}else{\n\t\t\t\t\tthis.info.isGood=!this.info.isGood;\n\t\t\t\t\te.isGood==0?this.info.good-=1:this.info.good+=1;\n\t\t\t\t}\n\t\t\t},\n\t\t\t//收藏\n\t\t\tasync clickCollection(e){\n\t\t\t\tthis.info.isCollection=!e.isCollection;\n\t\t\t\te.isCollection==0?this.info.collection+=1:this.info.collection-=1;\n\t\t\t\tconst res= await Community.sendCollection(e.Id);\n\t\t\t\tif(res){\n\t\t\t\t\t//#ifdef APP-PLUS||MP-WEIXIN\n\t\t\t\t\tuni.vibrateShort({\n\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\tconsole.log('抖动');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t//#endif\n\t\t\t\t}else{\n\t\t\t\t\te.isCollection==0?this.info.collection-=1:this.info.collection+=1;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tcomponents: {\n\t\t\tcommunityCard,\n\t\t\tcommunityInfoComment\n\t\t},\n\t\t\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t\n</style>\n"],"sourceRoot":""}