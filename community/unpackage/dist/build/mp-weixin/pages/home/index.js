(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/index"],{"30fb":function(t,e,n){},4908:function(t,e,n){"use strict";n.r(e);var o=n("cc30"),i=n("f09e");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("9505");var c,u=n("f0c5"),a=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);e["default"]=a.exports},"4a4d":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(n("a34a")),i=n("9a1e"),r=n("a25b");function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,o,i,r,c){try{var u=t[r](c),a=u.value}catch(s){return void n(s)}u.done?e(a):Promise.resolve(a).then(o,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function c(t){u(r,o,i,c,a,"next",t)}function a(t){u(r,o,i,c,a,"throw",t)}c(void 0)}))}}var s=function(){n.e("components/community-card/index").then(function(){return resolve(n("0762"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/community-comment/index").then(function(){return resolve(n("bf86"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/tabbar/tabbar").then(function(){return resolve(n("4201"))}.bind(null,n)).catch(n.oe)},l={data:function(){return{current:0,tabsCurrent:1,swiperCurrent:0,communityList:[],commentList:[],status:"loading",list:[{name:"关注"},{name:"最新"},{name:"最热"}],show:!1,showComment:!1,commentCode:{},communityObject:""}},components:{communityCard:s,communityComment:m,tabbar:d},mounted:function(){},onLoad:function(){var t=this;return a(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initGroup();case 2:t.initList();case 3:case"end":return e.stop()}}),e)})))()},onReachBottom:function(){var t=this;return a(o.default.mark((function e(){var n,r,c;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.communityObject){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.communityObject;case 4:if(n=e.sent,console.log(1==n.moreData),!n.moreData){e.next=15;break}return e.next=9,n.getMoreData();case 9:r=e.sent,c=i.Community.makeImages(r.items),t.communityList=t.communityList.concat(c),r.moreData||(t.status="nomore"),e.next=16;break;case 15:t.status="nomore";case 16:console.log(t.status);case 17:case"end":return e.stop()}}),e)})))()},onPullDownRefresh:function(){var e=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.initList();case 2:t.showToast({title:"刷新完成",icon:"none"}),t.stopPullDownRefresh();case 4:case"end":return n.stop()}}),n)})))()},methods:{tapSearch:function(e){console.log(123),t.navigateTo({url:"../search/search"})},changeShow:function(t){console.log(t),this.show=!0},changeMoreSelect:function(e){var n=this;return a(o.default.mark((function r(){var c,u;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1!=e.value){r.next=6;break}return r.next=3,i.Community.sendReport(e.Id);case 3:c=r.sent,r.next=16;break;case 6:if(2!=e.value){r.next=12;break}return u=n,r.next=10,new Promise((function(n,r){t.showModal({title:"提示",content:"确定要删除吗",success:function(){var t=a(o.default.mark((function t(n){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.confirm){t.next=7;break}return t.next=3,i.Community.removeCommunity(e.Id);case 3:t.sent,u.communityList.splice(e.index,1),t.next=8;break;case 7:n.cancel&&console.log("用户点击取消");case 8:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()})}));case 10:r.next=16;break;case 12:if(3!=e.value){r.next=16;break}return r.next=15,i.Community.closeTop(e.Id);case 15:c=r.sent;case 16:200==c.code?t.showToast({title:c.msg}):t.showToast({title:c.msg,icon:"none"});case 17:case"end":return r.stop()}}),r)})))()},clickH5comment:function(e){t.navigateTo({url:"../community/index?Id="+e})},initList:function(){var t=arguments,e=this;return a(o.default.mark((function n(){var r,c,u,a,s,m,d;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:"",c=t.length>1&&void 0!==t[1]?t[1]:1,e.swiperCurrent=c,""!=r){n.next=9;break}return n.next=6,i.Community.getContent();case 6:u=n.sent,n.next=12;break;case 9:return n.next=11,i.Community.getContent(r);case 11:u=n.sent;case 12:return n.next=14,i.Community.getCommunityTop();case 14:return a=n.sent,n.next=17,u.getMoreData();case 17:s=n.sent,s.moreData||(e.status="nomore"),m=i.Community.makeImages(s.items,!1),a.data.length>0?(d=i.Community.makeImages(a.data,!1),e.communityList=d.concat(m)):e.communityList=m,e.communityObject=u;case 23:case"end":return n.stop()}}),n)})))()},initGroup:function(){var t=this;return a(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.Community.getCommunityGroup();case 2:n=e.sent,n.data.shift(),t.list=t.list.concat(n.data);case 5:case"end":return e.stop()}}),e)})))()},tapGoodTwo:function(t){var e=this;return a(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.Community.sendCommentTwoGood(t.Id);case 2:r=n.sent,r&&(e.commentList[t.index].twoComment[t.indexTwo].isGood=!t.isGood,1==e.commentList[t.index].twoComment[t.indexTwo].isGood?e.commentList[t.index].twoComment[t.indexTwo].good+=1:e.commentList[t.index].twoComment[t.indexTwo].good-=1);case 4:case"end":return n.stop()}}),n)})))()},tapGood:function(t){var e=this;return a(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.Community.sendCommentGood(t.Id);case 2:r=n.sent,r&&(e.commentList[t.index].isGood=!t.isGood,1==e.commentList[t.index].isGood?e.commentList[t.index].good+=1:e.commentList[t.index].good-=1);case 4:case"end":return n.stop()}}),n)})))()},sendComment:function(e){var n=this;return a(o.default.mark((function c(){var u,a,s;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,i.Community.senComment({community_id:n.commentCode.Id,comment_user_id:e.Id,content:e.content});case 2:u=o.sent,u&&(t.showToast({title:"评论成功"}),t.$emit("commentOk",{code:!0}),a=t.getStorageSync("userInfo"),s={Id:u.data.Id,avatar:a.avatar,content:e.content,create_time:(0,r.getTime)(),good:0,isGood:0,nickname:a.nickname,sign:a.sign,twoComment:[],user_id:a.Id,username:a.username},e.Id?n.commentList[e.index]["twoComment"].unshift(s):n.commentList.unshift(s));case 4:case"end":return o.stop()}}),c)})))()},clickFollow:function(e){var n=this;return a(o.default.mark((function r(){var c;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.showLoading({title:"请求中"}),o.next=3,i.Community.sendFollow(e.Id);case 3:o.sent,t.hideLoading(),c=n,null===n||void 0===n||n.communityList.forEach((function(t,n){t.user_id==e.Id&&(c.communityList[n].isFollow=!e.isFollow)}));case 7:case"end":return o.stop()}}),r)})))()},clickGood:function(e){var n=this;return a(o.default.mark((function r(){var c;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n.communityList[e.isIndex].isGood=!e.isGood,0==e.isGood?n.communityList[e.isIndex].good+=1:n.communityList[e.isIndex].good-=1,o.next=4,i.Community.sendGood(e.Id);case 4:c=o.sent,c?t.vibrateShort({success:function(){console.log("抖动")}}):(n.communityList[e.isIndex].isGood=!n.communityList[e.isIndex].isGood,0==e.isGood?n.communityList[e.isIndex].good-=1:n.communityList[e.isIndex].good+=1);case 6:case"end":return o.stop()}}),r)})))()},clickCollection:function(e){var n=this;return a(o.default.mark((function r(){var c;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n.communityList[e.isIndex].isCollection=!e.isCollection,0==e.isCollection?n.communityList[e.isIndex].collection+=1:n.communityList[e.isIndex].collection-=1,o.next=4,i.Community.sendCollection(e.Id);case 4:c=o.sent,c?t.vibrateShort({success:function(){console.log("抖动")}}):0==e.isCollection?n.communityList[e.isIndex].collection-=1:n.communityList[e.isIndex].collection+=1;case 6:case"end":return o.stop()}}),r)})))()},tapComment:function(t){var e=this;return a(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commentCode=t,e.showComment=!0,n.next=4,i.Community.getComment(t.Id);case 4:r=n.sent,e.commentList=r.accoumulator;case 6:case"end":return n.stop()}}),n)})))()},closeComment:function(t){this.showComment=!1},getMyFollow:function(){var e=this;return a(o.default.mark((function n(){var r,c,u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(void 0!=t.getStorageSync("userInfo")&&""!=t.getStorageSync("userInfo")){n.next=3;break}return t.showToast({title:"请先登录",icon:"none"}),n.abrupt("return");case 3:return e.swiperCurrent=0,n.next=6,i.Community.getMyFollow();case 6:return r=n.sent,n.next=9,r.getMoreData();case 9:c=n.sent,u=i.Community.makeImages(c.items),u.moreData||(e.status="nomore"),e.communityList=u,e.communityObject=r;case 15:case"end":return n.stop()}}),n)})))()},getCommunityFire:function(){var t=this;return a(o.default.mark((function e(){var n,r,c;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.swiperCurrent=2,e.next=3,i.Community.getCommunityFire();case 3:return n=e.sent,e.next=6,n.getMoreData();case 6:r=e.sent,c=i.Community.makeImages(r.items),t.communityList=c,t.communityObject=n,console.log(c);case 11:case"end":return e.stop()}}),e)})))()},change:function(t){0==t?this.getMyFollow():1==t?this.initList():2==t?this.getCommunityFire():(this.initList(this.list[t].Id,t),this.swiperCurrent=t)},changeTab:function(e){this.current=e,t.reLaunch({url:this.tabbar[e].path})}}};e.default=l}).call(this,n("543d")["default"])},9505:function(t,e,n){"use strict";var o=n("30fb"),i=n.n(o);i.a},b557:function(t,e,n){"use strict";(function(t){n("82d0");o(n("66fd"));var e=o(n("4908"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},cc30:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={uSearch:function(){return n.e("uview-ui/components/u-search/u-search").then(n.bind(null,"55cb"))},uTabs:function(){return n.e("uview-ui/components/u-tabs/u-tabs").then(n.bind(null,"cc6e"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"e233"))},tabbar:function(){return n.e("components/tabbar/tabbar").then(n.bind(null,"4201"))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=[]},f09e:function(t,e,n){"use strict";n.r(e);var o=n("4a4d"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a}},[["b557","common/runtime","common/vendor"]]]);