(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{1240:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("a34a")),i=e("9a1e");function c(t){return t&&t.__esModule?t:{default:t}}function u(t,n,e,o,i,c,u){try{var r=t[c](u),s=r.value}catch(a){return void e(a)}r.done?n(s):Promise.resolve(s).then(o,i)}function r(t){return function(){var n=this,e=arguments;return new Promise((function(o,i){var c=t.apply(n,e);function r(t){u(c,o,i,r,s,"next",t)}function s(t){u(c,o,i,r,s,"throw",t)}r(void 0)}))}}var s=function(){e.e("components/community-card/index").then(function(){return resolve(e("0762"))}.bind(null,e)).catch(e.oe)},a={data:function(){return{searchValue:"",communityList:[],communityObject:"",tagList:[],hotList:[]}},onLoad:function(){this.tagList=t.getStorageSync("searchOld"),this.getSearchHot()},methods:{remove:function(){t.clearStorageSync("searchOld"),this.tagList=[]},tagClick:function(t){this.searchValue=this.tagList[t].title,this.search(this.tagList[t].title)},tagHot:function(t){var n=t.target.dataset.index;this.searchValue=this.hotList[n].title},change:function(t){""==t&&(this.communityList=[],this.communityObject="")},getSearchHot:function(){var t=this;return r(o.default.mark((function n(){var e;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.Community.getSearchHot();case 2:e=n.sent,t.hotList=e.data;case 4:case"end":return n.stop()}}),n)})))()},search:function(n){var e=this;return r(o.default.mark((function c(){var u,r,s,a,l;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return u=t.getStorageSync("searchOld"),u&&"object"==typeof u?(u.unshift({title:n,isShow:!0}),t.setStorageSync("searchOld",u)):(r=[{title:n,isShow:!0}],t.setStorageSync("searchOld",r)),o.next=4,i.Community.searchAll(n);case 4:return s=o.sent,o.next=7,s.getMoreData();case 7:a=o.sent,a.moreData||(e.status="nomore"),l=i.Community.makeImages(a.items),e.communityList=l,e.communityObject=s;case 13:case"end":return o.stop()}}),c)})))()},tapComment:function(t){var n=this;return r(o.default.mark((function e(){var c;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.commentCode=t,n.showComment=!0,e.next=4,i.Community.getComment(t.Id);case 4:c=e.sent,n.commentList=c.accoumulator;case 6:case"end":return e.stop()}}),e)})))()},closeComment:function(t){this.showComment=!1},clickH5comment:function(n){t.navigateTo({url:"../community/index?Id="+n})},changeMoreSelect:function(n){var e=this;return r(o.default.mark((function c(){var u,s;return o.default.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(1!=n.value){c.next=6;break}return c.next=3,i.Community.sendReport(n.Id);case 3:u=c.sent,c.next=10;break;case 6:if(2!=n.value){c.next=10;break}return s=e,c.next=10,new Promise((function(e,c){t.showModal({title:"提示",content:"确定要删除吗",success:function(){var t=r(o.default.mark((function t(e){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.confirm){t.next=7;break}return t.next=3,i.Community.removeCommunity(n.Id);case 3:t.sent,s.communityList.splice(n.index,1),t.next=8;break;case 7:e.cancel&&console.log("用户点击取消");case 8:case"end":return t.stop()}}),t)})));function e(n){return t.apply(this,arguments)}return e}()})}));case 10:200==u.code?t.showToast({title:u.msg}):t.showToast({title:u.msg,icon:"none"});case 11:case"end":return c.stop()}}),c)})))()},clickFollow:function(n){var e=this;return r(o.default.mark((function c(){var u;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.showLoading({title:"请求中"}),o.next=3,i.Community.sendFollow(n.Id);case 3:o.sent,t.hideLoading(),u=e,null===e||void 0===e||e.communityList.forEach((function(t,e){t.user_id==n.Id&&(u.communityList[e].isFollow=!n.isFollow)}));case 7:case"end":return o.stop()}}),c)})))()},clickGood:function(n){var e=this;return r(o.default.mark((function c(){var u;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.communityList[n.isIndex].isGood=!n.isGood,0==n.isGood?e.communityList[n.isIndex].good+=1:e.communityList[n.isIndex].good-=1,o.next=4,i.Community.sendGood(n.Id);case 4:u=o.sent,u?t.vibrateShort({success:function(){console.log("抖动")}}):(e.communityList[n.isIndex].isGood=!e.communityList[n.isIndex].isGood,0==n.isGood?e.communityList[n.isIndex].good-=1:e.communityList[n.isIndex].good+=1);case 6:case"end":return o.stop()}}),c)})))()},clickCollection:function(n){var e=this;return r(o.default.mark((function c(){var u;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.communityList[n.isIndex].isCollection=!n.isCollection,0==n.isCollection?e.communityList[n.isIndex].collection+=1:e.communityList[n.isIndex].collection-=1,o.next=4,i.Community.sendCollection(n.Id);case 4:u=o.sent,u?t.vibrateShort({success:function(){console.log("抖动")}}):0==n.isCollection?e.communityList[n.isIndex].collection-=1:e.communityList[n.isIndex].collection+=1;case 6:case"end":return o.stop()}}),c)})))()}},components:{communityCard:s}};n.default=a}).call(this,e("543d")["default"])},"2dd9":function(t,n,e){"use strict";(function(t){e("82d0");o(e("66fd"));var n=o(e("ac73"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"57ba":function(t,n,e){"use strict";var o=e("e240"),i=e.n(o);i.a},"9f4e":function(t,n,e){"use strict";e.r(n);var o=e("1240"),i=e.n(o);for(var c in o)"default"!==c&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=i.a},ac73:function(t,n,e){"use strict";e.r(n);var o=e("b09e"),i=e("9f4e");for(var c in i)"default"!==c&&function(t){e.d(n,t,(function(){return i[t]}))}(c);e("57ba");var u,r=e("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);n["default"]=s.exports},b09e:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return o}));var o={uSearch:function(){return e.e("uview-ui/components/u-search/u-search").then(e.bind(null,"55cb"))},uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"b3eb"))},uTag:function(){return e.e("uview-ui/components/u-tag/u-tag").then(e.bind(null,"794f"))},uGap:function(){return e.e("uview-ui/components/u-gap/u-gap").then(e.bind(null,"1276"))},uRow:function(){return e.e("uview-ui/components/u-row/u-row").then(e.bind(null,"8c5e"))},uCol:function(){return e.e("uview-ui/components/u-col/u-col").then(e.bind(null,"932d"))}},i=function(){var t=this,n=t.$createElement;t._self._c},c=[]},e240:function(t,n,e){}},[["2dd9","common/runtime","common/vendor"]]]);